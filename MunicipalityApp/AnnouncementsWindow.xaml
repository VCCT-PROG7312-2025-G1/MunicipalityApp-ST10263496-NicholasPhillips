<Window x:Class="MunicipalityApp.AnnouncementsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:MunicipalityApp.Converters"
    Title="Municipality Announcements &amp; Local Events"
        Height="700" Width="950"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI Variable Display"
        Background="#F5F7FA"
        Foreground="#0F4C5C">

    <!-- Using centralized resources from App.xaml (consolidated):
         - StringNullOrEmptyToVisibilityConverter
         - CardShadow, SubtleShadow
         - WatermarkTextBox, ModernComboBox, ModernButton
         - Named ListBoxItem style
     -->

    <!-- MAIN LAYOUT -->
    <Grid Margin="28">
        <Border CornerRadius="18"
                Padding="22"
                Background="White"
                Effect="{StaticResource CardShadow}"
                MaxWidth="900">

            <StackPanel>
                <!-- Header -->
                <TextBlock Text="Local Announcements &amp; Events"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="#0F4C5C"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>

        <!-- Filters: use WrapPanel so controls don't overflow on smaller windows -->
        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,18" ItemHeight="36">
            <TextBox x:Name="txtSearch"
                 Width="280"
                 Height="34"
                 Tag="Search announcements..."
                 Style="{StaticResource WatermarkTextBox}"
                 VerticalContentAlignment="Center"/>

            <ComboBox x:Name="cmbLocationFilter"
                  Width="180"
                  Margin="8,0,0,0"
                  Style="{StaticResource ModernComboBox}"
                  SelectionChanged="cmbLocationFilter_SelectionChanged"/>

            <Button Content="â† Back"
                Width="90"
                Height="34"
                Margin="8,0,0,0"
                Style="{StaticResource InCardButton}"
                Click="btnBack_Click"/>
        </WrapPanel>

                <!-- Announcements Section -->
                <TextBlock Text="Current Announcements"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0,0,0,6"/>
                <ListBox x:Name="lstAnnouncements"
                         Height="220"
                         BorderThickness="0"
                         Background="Transparent"
                         Foreground="#0F4C5C">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="Bold"
                                           FontSize="15"
                                           TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding Location}"
                                           FontStyle="Italic"
                                           Foreground="#607B8B"
                                           FontSize="13"/>
                                <TextBlock Text="{Binding Date, StringFormat=d}"
                                           Foreground="#607B8B"
                                           FontSize="13"
                                           Margin="0,0,0,4"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <!-- Recommendations Section -->
                <TextBlock Text="Recommended for You"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0,25,0,6"/>
                <ListBox x:Name="lstRecommendations"
                         Height="160"
                         BorderThickness="0"
                         Background="Transparent"
                         Foreground="#0F4C5C">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="Bold"
                                           FontSize="15"
                                           TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding Location}"
                                           FontStyle="Italic"
                                           Foreground="#607B8B"
                                           FontSize="13"/>
                                <TextBlock Text="{Binding Date, StringFormat=d}"
                                           Foreground="#607B8B"
                                           FontSize="13"
                                           Margin="0,0,0,4"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>
    </Grid>
</Window>
