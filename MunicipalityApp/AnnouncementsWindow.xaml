<Window x:Class="MunicipalityApp.AnnouncementsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:MunicipalityApp.Converters"
    Title="Municipality Announcements &amp; Local Events"
        Height="700" Width="950"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI Variable Display"
        Background="#F5F7FA"
        Foreground="#0F4C5C">

    <!-- Using centralized resources from App.xaml (consolidated):
         - StringNullOrEmptyToVisibilityConverter
         - CardShadow, SubtleShadow
         - WatermarkTextBox, ModernComboBox, ModernButton
         - Named ListBoxItem style
     -->

    <!-- MAIN LAYOUT -->
    <Grid Margin="40">
        <Border CornerRadius="18"
                Padding="30"
                Background="White"
                Effect="{StaticResource CardShadow}">

            <StackPanel>
                <!-- Header -->
                <TextBlock Text="Local Announcements &amp; Events"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="#0F4C5C"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>

                <!-- Filters -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,20">
                    <TextBox x:Name="txtSearch"
                             Width="320"
                             Height="36"
                             Tag="Search announcements..."
                             Style="{StaticResource WatermarkTextBox}"
                             VerticalContentAlignment="Center"/>

                    <ComboBox x:Name="cmbLocationFilter"
                              Width="200"
                              Style="{StaticResource ModernComboBox}"
                              SelectionChanged="cmbLocationFilter_SelectionChanged"/>

                    <Button Content="â† Back"
                            Width="100"
                            Height="36"
                            Style="{StaticResource ModernButton}"
                            Click="btnBack_Click"/>
                </StackPanel>

                <!-- Announcements Section -->
                <TextBlock Text="Current Announcements"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0,0,0,6"/>
                <ListBox x:Name="lstAnnouncements"
                         Height="240"
                         BorderThickness="0"
                         Background="Transparent"
                         Foreground="#0F4C5C">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="Bold"
                                           FontSize="15"
                                           TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding Location}"
                                           FontStyle="Italic"
                                           Foreground="#607B8B"
                                           FontSize="13"/>
                                <TextBlock Text="{Binding Date, StringFormat=d}"
                                           Foreground="#607B8B"
                                           FontSize="13"
                                           Margin="0,0,0,4"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <!-- Recommendations Section -->
                <TextBlock Text="Recommended for You"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0,25,0,6"/>
                <ListBox x:Name="lstRecommendations"
                         Height="180"
                         BorderThickness="0"
                         Background="Transparent"
                         Foreground="#0F4C5C">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="Bold"
                                           FontSize="15"
                                           TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding Location}"
                                           FontStyle="Italic"
                                           Foreground="#607B8B"
                                           FontSize="13"/>
                                <TextBlock Text="{Binding Date, StringFormat=d}"
                                           Foreground="#607B8B"
                                           FontSize="13"
                                           Margin="0,0,0,4"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>
    </Grid>
</Window>
