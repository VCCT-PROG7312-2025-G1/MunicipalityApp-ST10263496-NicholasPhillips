<Application x:Class="MunicipalityApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:converters="clr-namespace:MunicipalityApp.Converters"
             StartupUri="LandingPage.xaml">

    <Application.Resources>

        <!-- ===================================================== -->
        <!--                    THEME COLORS                      -->
        <!-- ===================================================== -->
        <Color x:Key="PrimaryDarkTealColor">#1B3838</Color>
        <Color x:Key="PrimaryTealColor">#1CA9A6</Color>
        <Color x:Key="AccentYellowColor">#FFB302</Color>
        <Color x:Key="AccentGoldColor">#FFD700</Color>
        <Color x:Key="NeutralWhiteColor">#FFFFFF</Color>
        <Color x:Key="NeutralBlackColor">#000000</Color>
        <Color x:Key="NeutralLightColor">#F5F7F9</Color>

        <!-- UI Utility Colors -->
        <Color x:Key="DangerColor">#8B0000</Color>
        <Color x:Key="DangerHoverColor">#FF4444</Color>
        <Color x:Key="DangerPressedColor">#CC0000</Color>
        <Color x:Key="ListHoverColor">#F5F5F5</Color>
        <Color x:Key="ListSelectedColor">#E8F4F4</Color>
        <Color x:Key="DividerColor">#EEEEEE</Color>
        <Color x:Key="TableAltColor">#ECF0F1</Color>
        <Color x:Key="CardLightColor">#FFF7F7F7</Color>
        <Color x:Key="ProgressBgColor">#E0E0E0</Color>
        <Color x:Key="InputBorderColor">#D9D9D9</Color>

        <!-- Text and Muted Colors -->
        <Color x:Key="TextPrimaryColor">#333333</Color>
        <Color x:Key="NeutralMutedColor">#666666</Color>
        <Color x:Key="NeutralFaintColor">#888888</Color>
        <Color x:Key="AccentMutedColor">#FF555555</Color>

        <!-- Hover and Pressed States -->
        <Color x:Key="PrimaryHoverColor">#224D4D</Color>
        <Color x:Key="PrimaryPressedColor">#163636</Color>

        <!-- ===================================================== -->
        <!--                      BRUSHES                         -->
        <!-- ===================================================== -->
        <SolidColorBrush x:Key="PrimaryDarkTealBrush" Color="{StaticResource PrimaryDarkTealColor}"/>
        <SolidColorBrush x:Key="PrimaryTealBrush" Color="{StaticResource PrimaryTealColor}"/>
        <SolidColorBrush x:Key="AccentYellowBrush" Color="{StaticResource AccentYellowColor}"/>
        <SolidColorBrush x:Key="AccentGoldBrush" Color="{StaticResource AccentGoldColor}"/>
        <SolidColorBrush x:Key="NeutralWhiteBrush" Color="{StaticResource NeutralWhiteColor}"/>
        <SolidColorBrush x:Key="NeutralBlackBrush" Color="{StaticResource NeutralBlackColor}"/>
        <SolidColorBrush x:Key="NeutralLightBrush" Color="{StaticResource NeutralLightColor}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimaryColor}"/>
        <SolidColorBrush x:Key="NeutralMutedBrush" Color="{StaticResource NeutralMutedColor}"/>
        <SolidColorBrush x:Key="NeutralFaintBrush" Color="{StaticResource NeutralFaintColor}"/>
        <SolidColorBrush x:Key="AccentMutedBrush" Color="{StaticResource AccentMutedColor}"/>
        <SolidColorBrush x:Key="PrimaryHoverBrush" Color="{StaticResource PrimaryHoverColor}"/>
        <SolidColorBrush x:Key="PrimaryPressedBrush" Color="{StaticResource PrimaryPressedColor}"/>
        <SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColor}"/>
        <SolidColorBrush x:Key="DangerHoverBrush" Color="{StaticResource DangerHoverColor}"/>
        <SolidColorBrush x:Key="DangerPressedBrush" Color="{StaticResource DangerPressedColor}"/>
        <SolidColorBrush x:Key="ListHoverBrush" Color="{StaticResource ListHoverColor}"/>
        <SolidColorBrush x:Key="ListSelectedBrush" Color="{StaticResource ListSelectedColor}"/>
        <SolidColorBrush x:Key="InputBorderBrush" Color="{StaticResource InputBorderColor}"/>
        <SolidColorBrush x:Key="DividerBrush" Color="{StaticResource DividerColor}"/>
        <SolidColorBrush x:Key="TableAlternateBrush" Color="{StaticResource TableAltColor}"/>
        <SolidColorBrush x:Key="CardLightBrush" Color="{StaticResource CardLightColor}"/>
        <SolidColorBrush x:Key="ProgressBackgroundBrush" Color="{StaticResource ProgressBgColor}"/>

        <!-- ===================================================== -->
        <!--                   TYPOGRAPHY & SPACING               -->
        <!-- ===================================================== -->
        <FontFamily x:Key="AppFont">Segoe UI</FontFamily>

        <sys:Double x:Key="TitleFontSize">28</sys:Double>
        <sys:Double x:Key="SubtitleFontSize">18</sys:Double>
        <sys:Double x:Key="BodyFontSize">14</sys:Double>
        <sys:Double x:Key="MediumFontSize">16</sys:Double>
        <sys:Double x:Key="SmallFontSize">12</sys:Double>

        <sys:Double x:Key="SpacingSmall">6</sys:Double>
        <sys:Double x:Key="SpacingMedium">10</sys:Double>
        <sys:Double x:Key="SpacingLarge">16</sys:Double>
        <sys:Double x:Key="MaxContentWidth">1100</sys:Double>

        <!-- ===================================================== -->
        <!--                   GLOBAL STYLES                      -->
        <!-- ===================================================== -->
        <Style TargetType="Window">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <Style x:Key="CenteredPageContainer" TargetType="Border">
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="MaxWidth" Value="{StaticResource MaxContentWidth}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="20"/>
        </Style>
        <!-- Exit button style placeholder (moved below to ensure BasedOn resolves) -->

        <!-- ===================================================== -->
        <!--                 TEXT & LABEL STYLES                   -->
        <!-- ===================================================== -->
        <Style x:Key="BaseText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
        </Style>

        <Style x:Key="TitleText" TargetType="TextBlock" BasedOn="{StaticResource BaseText}">
            <Setter Property="FontSize" Value="{StaticResource TitleFontSize}"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <Style x:Key="SubtitleText" TargetType="TextBlock" BasedOn="{StaticResource BaseText}">
            <Setter Property="FontSize" Value="{StaticResource SubtitleFontSize}"/>
            <Setter Property="Foreground" Value="{StaticResource NeutralMutedBrush}"/>
        </Style>

        <Style x:Key="BodyText" TargetType="TextBlock" BasedOn="{StaticResource BaseText}">
            <Setter Property="FontSize" Value="{StaticResource BodyFontSize}"/>
        </Style>

        <!-- ===================================================== -->
        <!-- Exit button style placeholder (moved after ModernNavButtonStyle to avoid ordering issues) -->
        <!--                   BUTTON STYLES                      -->
        <!-- ===================================================== -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryDarkTealBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                CornerRadius="6"
                                Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AccentButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentYellowBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
        </Style>

        <Style x:Key="ModernButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentYellowBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" BlurRadius="5" ShadowDepth="1" Opacity="0.25"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===================================================== -->
        <!--                 SECONDARY / NAV BUTTONS             -->
        <!-- ===================================================== -->
        <!-- Secondary (outline) button - lighter alternative to PrimaryButton -->
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource InputBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                CornerRadius="6"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryTealBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryPressedBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Global nav button style - used for top navigation (fallback if window doesn't override) -->
        <Style x:Key="ModernNavButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="8"
                                Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#16697A"/>
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#55FFFFFF" BlurRadius="10" ShadowDepth="0"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#12404D"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Exit button style for top nav (centralized so windows don't redefine it) -->
        <Style x:Key="ModernExitButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernNavButtonStyle}">
            <Setter Property="Background" Value="#DA2C38"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- ===================================================== -->
        <!--                    INPUT STYLES                      -->
        <!-- ===================================================== -->
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource InputBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" CornerRadius="6"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryTealBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===================================================== -->
        <!--               DIALOG / CARD VARIANTS                -->
        <!-- ===================================================== -->
        <!-- App background gradient used by report-style screens -->
        <LinearGradientBrush x:Key="AppBackgroundGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#004D40" Offset="0.0"/>
            <GradientStop Color="#00695C" Offset="1.0"/>
        </LinearGradientBrush>

        <DropShadowEffect x:Key="DialogDropShadow" BlurRadius="25" ShadowDepth="3" Color="#33000000"/>

        <Style x:Key="MainCard" TargetType="Border">
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Padding" Value="40"/>
            <Setter Property="Effect" Value="{StaticResource DialogDropShadow}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>

        <!-- ===================================================== -->
        <!--                  CARD & CONTAINERS                    -->
        <!-- ===================================================== -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Direction="320" ShadowDepth="5" Opacity="0.25" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===================================================== -->
        <!--                    GLOBAL EFFECTS                     -->
        <!-- ===================================================== -->
        <DropShadowEffect x:Key="DropShadowEffect"
                          Color="Black"
                          Direction="320"
                          ShadowDepth="5"
                          Opacity="0.25"
                          BlurRadius="12"/>

        <!-- Shadows used by cards and buttons (moved from window-scoped resources) -->
    <DropShadowEffect x:Key="CardShadow" Color="#33000000" BlurRadius="10" ShadowDepth="2"/>
    <DropShadowEffect x:Key="SubtleShadow" Color="#22000000" BlurRadius="8" ShadowDepth="1"/>

    <!-- Backwards-compatible drop shadow used by some windows/pages -->
    <DropShadowEffect x:Key="DropShadow" BlurRadius="16" ShadowDepth="0" Color="#44000000"/>

    <!-- CONVERTERS -->
    <!-- Ensure converters are declared before any templates that reference them -->
    <converters:StringNullOrEmptyToVisibilityConverter x:Key="StringNullOrEmptyToVisibilityConverter"/>

    <!-- Modern controls shared across pages (copied from AnnouncementsWindow resources) -->
    <Style x:Key="WatermarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderBrush" Value="{StaticResource InputBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <Border CornerRadius="8"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"/>
                            <ScrollViewer x:Name="PART_ContentHost" Margin="8,2,8,2"/>
                            <TextBlock Text="{TemplateBinding Tag}"
                                       Foreground="{StaticResource NeutralFaintBrush}"
                                       Margin="12,0,0,0"
                                       VerticalAlignment="Center"
                                       FontStyle="Italic"
                                       IsHitTestVisible="False"
                                       Visibility="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderBrush" Value="{StaticResource InputBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Height" Value="36"/>
        </Style>

        <!-- Backwards-compatible alias for pages/windows expecting ComboBoxStyle -->
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox" BasedOn="{StaticResource ModernComboBox}" />

    <!-- CONVERTERS -->
    <!-- (moved earlier) -->

        <!-- Named ListBoxItem style so pages can reference it consistently -->
        <Style x:Key="ListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="border" CornerRadius="10"
                                Background="White"
                                Effect="{StaticResource CardShadow}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#EAF6F9"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#C6E2E9"/>
                                <Setter Property="Foreground" Value="{StaticResource PrimaryDarkTealBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===================================================== -->
        <!--                  LOGO DRAWING                         -->
        <!-- ===================================================== -->
        <DrawingBrush x:Key="AppLogo" Stretch="Uniform">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="{StaticResource AccentYellowBrush}">
                        <GeometryDrawing.Geometry>
                            <EllipseGeometry Center="50,50" RadiusX="45" RadiusY="45"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="{StaticResource PrimaryDarkTealBrush}">
                        <GeometryDrawing.Geometry>
                            <PathGeometry Figures="M40,30 L40,70 L60,70 L60,30 Z M30,40 L30,70 L20,70 L20,40 Z M70,40 L70,70 L80,70 L80,40 Z M35,35 L45,35 L45,45 L35,45 Z M55,35 L65,35 L65,45 L55,45 Z"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

    </Application.Resources>
</Application>
