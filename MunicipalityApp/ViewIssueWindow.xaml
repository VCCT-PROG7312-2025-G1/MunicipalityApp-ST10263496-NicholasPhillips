<Window x:Class="MunicipalityApp.ViewIssueWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="View Reported Issues" Height="400" Width="700"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Search by GUID (BST lookup) and rebuild indexes (rebuilds BST/AVL/RBT/Heap/Graph) -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <TextBlock Text="Search by ID:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtSearchId" Width="280" Margin="8,0,0,0"/>
                <Button x:Name="btnFind" Content="Find" Width="80" Margin="10,0,0,0" Click="btnFind_Click"/>
            </StackPanel>
            <Button x:Name="btnRefresh" Content="Refresh Indexes" Width="130" HorizontalAlignment="Right" Click="btnRefresh_Click"/>
        </DockPanel>

        <DataGrid Grid.Row="1" x:Name="dgIssues" AutoGenerateColumns="False" CanUserAddRows="False"
                  AlternatingRowBackground="#ECF0F1">
            <DataGrid.Columns>
                <!-- Show unique identifier to enable cross-page tracking and search -->
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="2*"/>
                <!-- Title displayed for quick scanning; RBT index supports title-based lookup (not wired here) -->
                <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="2*"/>
                <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="*"/>
                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="*"/>
                <!-- Reported date shown in general format; AVL index supports chronological traversal -->
                <DataGridTextColumn Header="Reported" Binding="{Binding ReportedDate, StringFormat={}{0:g}}" Width="*"/>
                <!-- Progress percentage used by Min-Heap to surface least-complete items -->
                <DataGridTextColumn Header="Progress %" Binding="{Binding Progress}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
