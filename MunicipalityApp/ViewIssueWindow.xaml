<Window x:Class="MunicipalityApp.ViewIssueWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="View Reported Issues"
        Height="520"
        Width="880"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        Foreground="{StaticResource TextPrimaryBrush}"
        FontFamily="Segoe UI"
        FontSize="14">

    <Grid Margin="30">
        <!-- Main card-style container -->
        <Border CornerRadius="12"
                Padding="28"
                Background="{StaticResource SurfaceBrush}"
                Effect="{StaticResource SubtleShadow}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Header & Search Controls -->
                <StackPanel Grid.Row="0" Margin="0,0,0,18">
                    <!-- Title -->
                    <TextBlock Text="Reported Issues"
                               Style="{StaticResource TitleText}"
                               FontSize="26"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource PrimaryDarkTealBrush}"
                               Margin="0,0,0,10"/>

                    <!-- Search + Refresh Actions -->
                    <DockPanel LastChildFill="False">
                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                            <TextBlock Text="Search by ID:"
                                       VerticalAlignment="Center"
                                       Foreground="{StaticResource PrimaryDarkTealBrush}"/>
                            <TextBox x:Name="txtSearchId"
                                     Width="280"
                                     Style="{StaticResource TextBoxStyle}"
                                     ToolTip="Enter the unique issue ID for lookup"/>
                            <Button x:Name="btnFind"
                                    Content="Find"
                                    Width="90"
                                    Style="{StaticResource PrimaryButton}"
                                    Click="btnFind_Click"/>
                        </StackPanel>

                        <Button x:Name="btnRefresh"
                                Content="Rebuild Indexes"
                                Width="160"
                                Margin="12,0,0,0"
                                Style="{StaticResource SecondaryButton}"
                                Click="btnRefresh_Click"/>
                    </DockPanel>
                </StackPanel>

                <!-- Data Grid Display -->
                <DataGrid x:Name="dgIssues"
                          Grid.Row="1"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserResizeRows="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column"
                          RowHeight="36"
                          AlternatingRowBackground="{StaticResource TableAlternateBrush}"
                          BorderBrush="{StaticResource DividerBrush}"
                          BorderThickness="1"
                          Background="{StaticResource CardBackgroundBrush}"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">

                    <!-- Modern DataGrid Style -->
                    <DataGrid.Resources>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{StaticResource PrimaryDarkTealBrush}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="Padding" Value="8,4"/>
                            <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        </Style>
                    </DataGrid.Resources>

                    <!-- Column Definitions -->
                    <DataGrid.Columns>
                        <!-- ID for unique tracking and search -->
                        <DataGridTextColumn Header="ID"
                                            Binding="{Binding Id}"
                                            Width="2*"/>
                        <!-- Title field for quick scanning -->
                        <DataGridTextColumn Header="Title"
                                            Binding="{Binding Title}"
                                            Width="2*"/>
                        <!-- Category classification -->
                        <DataGridTextColumn Header="Category"
                                            Binding="{Binding Category}"
                                            Width="*"/>
                        <!-- Current workflow status -->
                        <DataGridTextColumn Header="Status"
                                            Binding="{Binding Status}"
                                            Width="*"/>
                        <!-- Chronological reference (AVL index) -->
                        <DataGridTextColumn Header="Reported"
                                            Binding="{Binding ReportedDate, StringFormat={}{0:g}}"
                                            Width="*"/>
                        <!-- Completion percentage -->
                        <DataGridTextColumn Header="Progress (%)"
                                            Binding="{Binding Progress}"
                                            Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</Window>
